# 表单设计器

### 功能概述

> 以拖拽的形式生成表单项，可视化设置表单属性（通用属性：栅格化，尺寸，特有表单项属性，校验），生成具体表单代码 

### 详述

- 表单类型：
    1. 基础：输入框（input,textarea,inputnumber）,多选框（checkbox,checktag）,单选框（radio）,下拉选择器（select），时间选择器（时间选择，范围选择），开关（switch）,上传（fileUpload,imgUpload），评分（rate）。
    2. 特殊：栅格（grid）。
    3. 待定：步骤条（steps）,树形结构（tree）,富文本编辑器...
- 属性：
    1. 通用属性：label,尺寸，栅格...
    2. 表单属性：根据具体表单设计
    3. 校验：
- 代码生成

### 重难点代码功能

- 拖拽，高亮代码显示块，事件广播,数据校验,代码生成

### 架构思路

- 元数据：描述表单项的类型及通用属性及校验规则及特殊属性
- 全局仓库中存放元数据结构，开发输入输出管道函数用于不同属性及入参的处理，输出新的数据结构
- 拖拽控件，更改控件属性 =》 触发管道函数 =》 全局广播 =》 更新元数据仓库 =》 更新视图，更新设计器视图 =》 （懒触发）生成代码
- 管道函数描述：输入（元数据，change类型，change参数），输出（新元数据）

### 功能细化

- 表单项扩展，全局配置，本地配置，数据结构设计，自定义样式、属性，后台api字段映射

### 使用

- 用户通过交互界面拖拽生成表单 =》 生成元数据 =》 解析成代码，元数据结构设计，元数据验证合法性，元数据（json schema/async validator）

### 数据结构

- 描述表单类型，表单label，属性（样式，表单数据），校验规则，联动属性，接口数据映射

### 问题记录

- 元数据 =》 数组结构（generateArrData）
- 值改变 =》 更新数组结构（updateArrData）=》 校验数组表单（validateArrDataForm）
- 点击生成json =》 数组结构 =》 元数据（generateMetaData）
- 待定校验元数据表单（validateMetaDataForm）
